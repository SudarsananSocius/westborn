<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Inherit the existing email template -->
        <record id="mail_template_loyalty_card" model="mail.template">
        <field name="name">Coupon: Coupon With Cusstomer Invitation</field>
        <field name="model_id" ref="loyalty.model_loyalty_card"/>
        <field name="subject">Your reward coupon from {{ object.program_id.company_id.name }} </field>
        <field name="email_from">{{ object.program_id.company_id.email }}</field>
        <field name="partner_to" eval="False"/>
        <field name="use_default_to" eval="True"/>
        <field name="description">Sent to customer with coupon information</field>
        <field name="body_html" type="html">
            <table border="0" cellpadding="0" cellspacing="0" style="width:100%; margin:0px auto; background:#ffffff; color:#333333;">
                <tbody>
                    <tr>
                        <td valign="top" style="text-align: center; font-size: 14px;">
                            <t t-if="object._mail_get_customer().name">
                                Congratulations <t t-out="object._mail_get_customer().name or ''">Brandon Freeman</t>,<br />
                            </t>

                            Here is your reward from <t t-out="object.program_id.company_id.name or ''">YourCompany</t>.<br />

                            <t t-foreach="object.program_id.reward_ids" t-as="reward">
                                <t t-if="reward.required_points &lt;= object.points">
                                    <span t-attf-style="font-size: 50px; color: {{object.program_id.company_id.email_secondary_color or '#875A7B'}}; font-weight: bold;" t-esc="reward.description">Reward Description</span>
                                    <br/>
                                </t>
                            </t>
                        </td>
                    </tr>
                    <tr>
                        <td valign="top" style="text-align: center; font-size: 14px;">
                            <t t-if="not object.invitation_sent">
                                    Dear <t t-out="object.partner_id.name or ''">Marc Demo</t>,<br/> <br/>
                                    Welcome to <t t-out="object.company_id.name">YourCompany</t>'s Portal!<br/><br/>
                                    An account has been created for you with the following login: <t t-out="object.partner_id.email">demo</t><br/><br/>
                                    Click on the button below to pick a password and activate your account.
                                    <div style="margin: 16px 0px 16px 0px; text-align: center;">
                                        <a t-att-href="object.partner_id._get_signup_url()"
                                        t-attf-style="display: inline-block; padding: 10px; text-decoration: none; font-size: 12px; background-color: {{object.company_id.email_secondary_color or '#875A7B'}}; color: {{object.company_id.email_primary_color or '#FFFFFF'}}; border-radius: 5px;">
                                            <strong>Activate Account</strong>
                                        </a>
                                    </div>
                                    <t t-out="ctx.get('welcome_message') or ''">Welcome to our company's portal.</t>
                            </t>
                        </td>
                    </tr>
                    <tr style="margin-top: 16px">
                        <td valign="top" style="text-align: center; font-size: 14px;">
                            Use this promo code
                            <t t-if="object.expiration_date">
                                before <t t-out="object.expiration_date or ''">2021-06-16</t>
                            </t>
                            <p style="margin-top: 16px;">
                                <strong style="padding: 16px 8px 16px 8px; border-radius: 3px; background-color: #F1F1F1;" t-out="object.code or ''">15637502648479132902</strong>
                            </p>
                            <t t-foreach="object.program_id.rule_ids" t-as="rule">
                                <t t-if="rule.minimum_qty not in [0, 1]">
                                    <span style="font-size: 14px;">
                                        Minimum purchase of <t t-out="rule.minimum_qty or ''">10</t> products
                                    </span><br />
                                </t>
                                <t t-if="rule.minimum_amount != 0.00">
                                    <span style="font-size: 14px;">
                                        Valid for purchase above <t t-out="rule.company_id.currency_id.symbol or ''">$</t><t t-out="'%0.2f' % float(rule.minimum_amount) or ''">10.00</t>
                                    </span><br />
                                </t>
                            </t>
                            <br/>
                            Thank you,
                            <t t-if="object._get_signature()">
                                <br />
                                <div>--<br/><t t-out="object._get_signature() or ''">Mitchell Admin</t></div>
                            </t>
                        </td>
                    </tr>
                </tbody>
            </table>
        </field>
        <field name="report_template_ids" eval="[(4, ref('loyalty.report_loyalty_card'))]"/>
        <field name="auto_delete" eval="True"/>
    </record>
    </data>
</odoo>
