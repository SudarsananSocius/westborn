<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template
        id="product_price_inherit_view"
        inherit_id="website_sale.product_price">
        <xpath expr="//div[@name='product_price_container']" position="attributes">
            <attribute name="groups">user.has_group('westborn.group_beneficiary_admin')</attribute>
        </xpath>
        <xpath expr="//div[@name='product_price_container']" position="after">
            <t t-if="product.credit_value">
                <div class="oe_product_credit_value">
                    <span t-field="product.credit_value" />
                    <span>Credits</span>
                </div>
            </t>
        </xpath>
    </template>

    <template id="cart_lines_price_inherit" inherit_id="website_sale.cart_lines_price">
        <xpath expr="//h6[@name='website_sale_cart_line_price']" position="attributes">
            <attribute name="groups">user.has_group('westborn.group_beneficiary_admin')</attribute>
        </xpath>
        <xpath expr="//h6[@name='website_sale_cart_line_price']" position="after">
            <t t-if="line.product_id.credit_value">
                <h6 class="d-flex flex-column flex-md-row align-items-end align-items-md-start justify-content-md-end mb-1">
                    <div class="oe_product_credit_value">
                        <span t-field="website_sale_order.total_credits" />
                        <span>Credits</span>
                    </div>
                </h6>
            </t>
        </xpath>
        
    </template>

    <template id="credit_points_inherit" inherit_id="website_sale.total">
        <xpath expr="//tr[@name='o_order_total_untaxed']" position="after">
            <tr name="o_order_total_credits">
                    <td
                        class="border-0 pb-2 ps-0 pt-0 text-start text-muted"
                        colspan="2">
                        Total Credits
                    </td>
                    <td class="text-end border-0 pb-2 pe-0 pt-0">
                        <span t-field="website_sale_order.total_credits"
                              style="white-space: nowrap;" />
                    </td>
                </tr>
        </xpath>
        <xpath expr="//tr[@name='o_order_total_untaxed']" position="replace">            
        </xpath>
        <xpath expr="//tr[@name='o_order_total']" position="after">
            <tr name="o_order_total_credits" class="border-top">
                <td colspan="2" class="border-0 ps-0 pt-2"><strong>Total Credits</strong></td>
                <td class="text-end border-0 px-0 pt-2">
                    <strong t-field="website_sale_order.total_credits"
                            class="text-end p-0"
                            />
                </td>
            </tr>
        </xpath>
        <xpath expr="//tr[@name='o_order_total_taxes']" position="replace">
            
        </xpath>
        <xpath expr="//tr[@name='o_order_total']" position="replace">
            
        </xpath>
        <xpath expr="//tr[@name='o_order_delivery']" position="replace">
            
        </xpath>
    </template>
    <template id="cart_summary_content_inherit" inherit_id="website_sale.cart_summary_content">
        <xpath expr="//td[@name='website_sale_cart_summary_line_price']//t" position="after">
            <span
            t-out="website_sale_order.total_credits"
            style="white-space: nowrap;"
        />
        </xpath>
        <xpath expr="//td[@name='website_sale_cart_summary_line_price']//t" position="replace">
            
        </xpath>
    </template>


</odoo>
